<!--
  Generated template for the ClassroomPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>
  <ion-navbar> <ion-title>Frequência</ion-title> </ion-navbar>
  <ion-toolbar>
    <profile-status-header></profile-status-header>
    <ion-item no-lines *ngIf="profile.school?.status === 'accepted'">
      <ion-label>Trocar turma</ion-label>
      <ion-select
        [(ngModel)]="currentClassroom"
        (ionChange)="getFrequencies(currentClassroom)"
      >
        <ion-option
          *ngFor="let classroom of profile.classrooms"
          [value]="classroom._id"
          >{{ classroom.series + " | " + classroom.subClass }}</ion-option
        >
      </ion-select>
    </ion-item>
  </ion-toolbar>
</ion-header>

<ion-content no-padding>
  <ion-grid
    no-padding
    offset-xl-2
    col-xl-8
    *ngIf="profile.school?.status === 'accepted'"
  >
    <ion-searchbar
      placeholder="Buscar chamada"
      (ionInput)="getItems($event)"
    ></ion-searchbar>
    <ion-list inset>
      <ion-item no-padding *ngFor="let frequency of frequencies">
        <h3>{{ frequency.date | date: "medium" }}</h3>
        <p>
          {{ frequency.absence }}
          {{ frequency.absence > 0 ? "ausências" : "ausência" }}
        </p>
        <button item-end ion-button small (click)="editFrequency(frequency)">
          Editar
        </button>
      </ion-item>
    </ion-list>
  </ion-grid>
</ion-content>

<ion-footer no-border *ngIf="profile.school?.status === 'accepted'">
  <ion-navbar transparent>
    <ion-buttons center>
      <ion-grid>
        <ion-row>
          <ion-col col-sm-12>
            <button
              text-uppercase
              ion-button
              solid
              large
              full
              (click)="newFrequency()"
            >
              NOVA CHAMADA
            </button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-buttons>
  </ion-navbar>
</ion-footer>
