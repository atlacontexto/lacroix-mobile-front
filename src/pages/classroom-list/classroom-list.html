<!--
  Generated template for the ClassroomListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>
  <ion-navbar transparent> <ion-title>Lista de Turmas</ion-title> </ion-navbar>
  <ion-toolbar> <profile-status-header></profile-status-header> </ion-toolbar>
  <ion-item
    *ngIf="
      profile.school?.status === 'accepted' ||
      profile.county?.status === 'accepted'
    "
  >
    <ion-label stacked>Ano</ion-label>
    <ion-select [(ngModel)]="yearSelected" (ionChange)="updateClassroomList()">
      <ion-option *ngFor="let year of years" [value]="year._id">{{
        year.year | date: "yyyy":"+0000"
      }}</ion-option>
    </ion-select>
  </ion-item>
</ion-header>

<ion-content no-padding>
  <div padding *ngIf="classrooms.length == 0">
    <p ion-text text-center>
      Não existem turmas cadastradas ainda. Aguarde a atualização.
    </p>
  </div>
  <ion-list
    *ngIf="
      profile.school?.status === 'accepted' ||
      profile.county?.status === 'accepted'
    "
  >
    <button
      ion-item
      *ngFor="let classroom of classrooms"
      (click)="openClassroom(classroom)"
    >
      <h2 text-wrap>{{ classroom.series }}</h2>
      <ion-badge *ngIf="classroom.professors.length != 0" color="secondary"
        >{{ classroom.professors.length }}
        {{
          classroom.professors.length > 1 ? "professores" : "professor"
        }}</ion-badge
      >
      <ion-badge *ngIf="classroom.professors.length == 0" color="danger"
        >sem professor</ion-badge
      >
      <p>Operação: {{ classroom.hour }}</p>
      <p>Turno: {{ classroom.shift }}</p>
      <p>Alunos: {{ classroom.students.length }}</p>
      <p>Turma: {{ classroom.subClass }}</p>
    </button>
  </ion-list>
</ion-content>
